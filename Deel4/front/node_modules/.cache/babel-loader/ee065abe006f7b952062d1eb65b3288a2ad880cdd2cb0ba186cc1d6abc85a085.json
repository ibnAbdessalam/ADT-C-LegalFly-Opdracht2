{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { getAllRequestsApi, createRequestApi, updateRequestApi, deleteRequestApi } from '../services/requestsService';\nexport default {\n  name: 'RequestsService',\n  data() {\n    return {\n      loading: false,\n      newRequest: {\n        title: '',\n        description: '',\n        clientEmail: ''\n      },\n      requests: []\n    };\n  },\n  mounted() {\n    this.loadRequests();\n  },\n  methods: {\n    async createRequest() {\n      if (!this.newRequest.title || !this.newRequest.clientEmail) {\n        alert('Veuillez remplir au moins le titre et l\\'email');\n        return;\n      }\n      this.loading = true;\n      try {\n        await createRequestApi(this.newRequest);\n        this.newRequest = {\n          title: '',\n          description: '',\n          clientEmail: ''\n        };\n        alert('Demande cr√©√©e avec succ√®s!');\n        await this.loadRequests();\n      } catch (error) {\n        alert('Erreur: ' + (error.response?.data || error.message));\n      } finally {\n        this.loading = false;\n      }\n    },\n    async loadRequests() {\n      this.loading = true;\n      try {\n        const data = await getAllRequestsApi();\n        this.requests = data.map(req => ({\n          ...req,\n          newStatus: req.status\n        }));\n      } catch (error) {\n        alert('Erreur lors du chargement: ' + error.message);\n      } finally {\n        this.loading = false;\n      }\n    },\n    async updateRequestStatus(request) {\n      this.loading = true;\n      try {\n        const updatedRequest = {\n          ...request,\n          status: request.newStatus\n        };\n        await updateRequestApi(request.id, updatedRequest);\n        alert('Statut mis √† jour!');\n        await this.loadRequests();\n      } catch (error) {\n        alert('Erreur: ' + (error.response?.data || error.message));\n      } finally {\n        this.loading = false;\n      }\n    },\n    async deleteRequest(id) {\n      if (!confirm('√ätes-vous s√ªr de vouloir supprimer cette demande?')) {\n        return;\n      }\n      this.loading = true;\n      try {\n        await deleteRequestApi(id);\n        alert('Demande supprim√©e!');\n        await this.loadRequests();\n      } catch (error) {\n        alert('Erreur: ' + (error.response?.data || error.message));\n      } finally {\n        this.loading = false;\n      }\n    },\n    formatDate(dateString) {\n      if (!dateString) return '';\n      return new Date(dateString).toLocaleString('fr-FR');\n    }\n  }\n};","map":{"version":3,"names":["getAllRequestsApi","createRequestApi","updateRequestApi","deleteRequestApi","name","data","loading","newRequest","title","description","clientEmail","requests","mounted","loadRequests","methods","createRequest","alert","error","response","message","map","req","newStatus","status","updateRequestStatus","request","updatedRequest","id","deleteRequest","confirm","formatDate","dateString","Date","toLocaleString"],"sources":["C:\\Github2526\\ADT-C-LegalFly-Opdracht2\\Deel 3\\front\\src\\components\\RequestsService.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <!-- Create Request Section -->\r\n    <div class=\"section\">\r\n      <h2>‚ûï Cr√©er une Demande</h2>\r\n      <div class=\"form-group\">\r\n        <label>Titre:</label>\r\n        <input name=\"titel\" v-model=\"newRequest.title\" placeholder=\"Titre de la demande\" />\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label>Description:</label>\r\n        <textarea name=\"beschrijving\" v-model=\"newRequest.description\" placeholder=\"Description d√©taill√©e...\"></textarea>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label>Email client:</label>\r\n        <input name=\"\" v-model=\"newRequest.clientEmail\" type=\"email\" placeholder=\"client@example.com\" />\r\n      </div>\r\n      <button @click=\"createRequest\" :disabled=\"loading\">\r\n        {{ loading ? 'Cr√©ation...' : 'Cr√©er' }}\r\n      </button>\r\n    </div>\r\n\r\n    <!-- Requests List Section -->\r\n    <div class=\"section\">\r\n      <h2>üìã Liste des Demandes</h2>\r\n      <button @click=\"loadRequests\" :disabled=\"loading\" style=\"margin-bottom: 15px;\">\r\n        {{ loading ? 'Chargement...' : 'üîÑ Actualiser' }}\r\n      </button>\r\n\r\n      <div v-if=\"requests.length === 0\" class=\"response-box\">\r\n        Aucune demande trouv√©e.\r\n      </div>\r\n\r\n      <div class=\"requests-list\">\r\n        <div v-for=\"request in requests\" :key=\"request.id\" class=\"request-item\">\r\n          <div class=\"request-header\">\r\n            <span class=\"request-title\">{{ request.title }}</span>\r\n            <span class=\"request-status\" :class=\"'status-' + request.status\">\r\n              {{ request.status }}\r\n            </span>\r\n          </div>\r\n          <p><strong>Description:</strong> {{ request.description }}</p>\r\n          <p><strong>Email:</strong> {{ request.clientEmail }}</p>\r\n          <p><strong>Cr√©√© le:</strong> {{ formatDate(request.createdAt) }}</p>\r\n          <p v-if=\"request.updatedAt\"><strong>Mis √† jour le:</strong> {{ formatDate(request.updatedAt) }}</p>\r\n\r\n          <div class=\"request-actions\">\r\n            <select v-model=\"request.newStatus\" class=\"btn-small\">\r\n              <option value=\"PENDING\">PENDING</option>\r\n              <option value=\"IN_PROGRESS\">IN_PROGRESS</option>\r\n              <option value=\"COMPLETED\">COMPLETED</option>\r\n              <option value=\"CANCELLED\">CANCELLED</option>\r\n            </select>\r\n            <button @click=\"updateRequestStatus(request)\" class=\"btn-small btn-warning\">\r\n              Changer Statut\r\n            </button>\r\n            <button @click=\"deleteRequest(request.id)\" class=\"btn-small btn-danger\">\r\n              üóëÔ∏è Supprimer\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getAllRequestsApi,\r\n  createRequestApi,\r\n  updateRequestApi,\r\n  deleteRequestApi\r\n} from '../services/requestsService'\r\n\r\nexport default {\r\n  name: 'RequestsService',\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      newRequest: {\r\n        title: '',\r\n        description: '',\r\n        clientEmail: ''\r\n      },\r\n      requests: []\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadRequests()\r\n  },\r\n  methods: {\r\n    async createRequest() {\r\n      if (!this.newRequest.title || !this.newRequest.clientEmail) {\r\n        alert('Veuillez remplir au moins le titre et l\\'email')\r\n        return\r\n      }\r\n\r\n      this.loading = true\r\n\r\n      try {\r\n        await createRequestApi(this.newRequest)\r\n        this.newRequest = { title: '', description: '', clientEmail: '' }\r\n        alert('Demande cr√©√©e avec succ√®s!')\r\n        await this.loadRequests()\r\n      } catch (error) {\r\n        alert('Erreur: ' + (error.response?.data || error.message))\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    async loadRequests() {\r\n      this.loading = true\r\n\r\n      try {\r\n        const data = await getAllRequestsApi()\r\n        this.requests = data.map(req => ({\r\n          ...req,\r\n          newStatus: req.status\r\n        }))\r\n      } catch (error) {\r\n        alert('Erreur lors du chargement: ' + error.message)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    async updateRequestStatus(request) {\r\n      this.loading = true\r\n\r\n      try {\r\n        const updatedRequest = {\r\n          ...request,\r\n          status: request.newStatus\r\n        }\r\n        await updateRequestApi(request.id, updatedRequest)\r\n        alert('Statut mis √† jour!')\r\n        await this.loadRequests()\r\n      } catch (error) {\r\n        alert('Erreur: ' + (error.response?.data || error.message))\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    async deleteRequest(id) {\r\n      if (!confirm('√ätes-vous s√ªr de vouloir supprimer cette demande?')) {\r\n        return\r\n      }\r\n\r\n      this.loading = true\r\n\r\n      try {\r\n        await deleteRequestApi(id)\r\n        alert('Demande supprim√©e!')\r\n        await this.loadRequests()\r\n      } catch (error) {\r\n        alert('Erreur: ' + (error.response?.data || error.message))\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    formatDate(dateString) {\r\n      if (!dateString) return ''\r\n      return new Date(dateString).toLocaleString('fr-FR')\r\n    }\r\n  }\r\n}\r\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}